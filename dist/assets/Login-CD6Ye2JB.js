import{g as p,h as k,j as x,o as C,k as o,w as r,r as s,u as R,l as q,m as f,n as B,p as c}from"./vendor-C-QY2w59.js";import{u as L}from"./user-CZNW9FaP.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-VRQGSizK.js";const U={class:"login-container"},h={__name:"Login",setup(E){const _=R(),g=q(),v=L(),u=p(null),d=p(!1),t=k({email:"",password:""}),w={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]},b=async()=>{var a,e;if(u.value)try{await u.value.validate(),d.value=!0,await v.login(t),c.success("登录成功");const l=g.query.redirect||"/";_.push(l)}catch(l){c.error(((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.message)||"登录失败")}finally{d.value=!1}};return(a,e)=>{const l=s("el-input"),i=s("el-form-item"),m=s("el-button"),y=s("el-form"),V=s("el-card");return C(),x("div",U,[o(V,{class:"login-card"},{header:r(()=>e[3]||(e[3]=[B("h2",null,"登录",-1)])),default:r(()=>[o(y,{model:t,rules:w,ref_key:"formRef",ref:u,"label-width":"80px"},{default:r(()=>[o(i,{label:"邮箱",prop:"email"},{default:r(()=>[o(l,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=n=>t.email=n),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(i,{label:"密码",prop:"password"},{default:r(()=>[o(l,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.password=n),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(i,null,{default:r(()=>[o(m,{type:"primary",onClick:b,loading:d.value},{default:r(()=>e[4]||(e[4]=[f("登录")])),_:1},8,["loading"]),o(m,{onClick:e[2]||(e[2]=n=>a.$router.push("/register"))},{default:r(()=>e[5]||(e[5]=[f("注册")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},M=N(h,[["__scopeId","data-v-cfca6585"]]);export{M as default};
