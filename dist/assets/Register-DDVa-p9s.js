import{g as p,h as y,j as P,o as R,k as s,w as o,r as u,u as x,m as f,n as U,p as g}from"./vendor-C-QY2w59.js";import{u as k}from"./user-CZNW9FaP.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-VRQGSizK.js";const C={class:"register-container"},E={__name:"Register",setup(B){const _=x(),w=k(),d=p(null),m=p(!1),r=y({username:"",email:"",password:"",confirmPassword:""}),c={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名长度不能小于3位",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(t,e,l)=>{e===""?l(new Error("请再次输入密码")):e!==r.password?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"}]},V=async()=>{var t,e;if(d.value)try{await d.value.validate(),m.value=!0,await w.register({username:r.username,email:r.email,password:r.password}),g.success("注册成功，请登录"),_.push("/login")}catch(l){g.error(((e=(t=l.response)==null?void 0:t.data)==null?void 0:e.message)||"注册失败")}finally{m.value=!1}};return(t,e)=>{const l=u("el-input"),n=u("el-form-item"),i=u("el-button"),b=u("el-form"),v=u("el-card");return R(),P("div",C,[s(v,{class:"register-card"},{header:o(()=>e[5]||(e[5]=[U("h2",null,"注册",-1)])),default:o(()=>[s(b,{model:r,rules:c,ref_key:"formRef",ref:d,"label-width":"80px"},{default:o(()=>[s(n,{label:"用户名",prop:"username"},{default:o(()=>[s(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(n,{label:"邮箱",prop:"email"},{default:o(()=>[s(l,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),s(n,{label:"密码",prop:"password"},{default:o(()=>[s(l,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),s(n,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[s(l,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirmPassword=a),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1}),s(n,null,{default:o(()=>[s(i,{type:"primary",onClick:V,loading:m.value},{default:o(()=>e[6]||(e[6]=[f("注册")])),_:1},8,["loading"]),s(i,{onClick:e[4]||(e[4]=a=>t.$router.push("/login"))},{default:o(()=>e[7]||(e[7]=[f("返回登录")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},M=q(E,[["__scopeId","data-v-7ef5e09c"]]);export{M as default};
